<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Telegram Chat – Perfect Mobile Footer 2025</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }

    body {
      padding-bottom: env(safe-area-inset-bottom, 0px);
      background: #f5f5f5;
    }

    #root {
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .chat-container {
      flex: 1;
      overflow: hidden;
      position: relative;
    }

    .messages-wrapper {
      height: 100%;
      overflow-y: auto;
      padding-bottom: 80px; /* Space for footer */
      background-image: url(https://i.ibb.co/fzG6R49y/Screenshot-20251125-105049.jpg);
      background-size: cover;
      background-position: center;
    }

    /* Hybrid Sticky Footer – Best for 2025 */
    .footer {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      background: #fff;
      border-top: 1px solid #e0e0e0;
      padding: 8px 10px;
      padding-bottom: calc(8px + env(safe-area-inset-bottom, 0px));
      display: flex;
      align-items: center;
      z-index: 100;
      transition: transform 0.3s ease;
      height: 56px;
    }

    /* When emoji picker is open → push footer up */
    .footer.emoji-open {
      transform: translateY(-300px);
    }

    /* Emoji Picker Bottom Sheet */
    .emoji-picker {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      height: 300px;
      background: #f5f5f5;
      border-top: 1px solid #ddd;
      transform: translateY(100%);
      transition: transform 0.3s ease;
      z-index: 99;
      padding-bottom: env(safe-area-inset-bottom, 0px);
    }

    .emoji-picker.show {
      transform: translateY(0);
    }

    .input-box-wrapper {
      flex: 1;
      background: #f1f1f1;
      border-radius: 24px;
      padding: 8px 12px;
      display: flex;
      align-items: center;
      min-height: 44px;
      margin: 0 8px;
    }

    .input-box {
      flex: 1;
      font-size: 16px;
      outline: none;
      border: none;
      background: transparent;
      resize: none;
      max-height: 100px;
      overflow-y: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .input-box:empty:before {
      content: "Message";
      color: #aaa;
    }

    .left-icon, .right-icon {
      width: 28px;
      height: 28px;
      flex-shrink: 0;
      cursor: pointer;
    }

    .send-button {
      width: 32px;
      height: 32px;
      background: #3b82f6;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-left: 8px;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useRef, useEffect } = React;

    function TelegramChat() {
      const [showChat, setShowChat] = useState(false);
      const [showEmoji, setShowEmoji] = useState(false);
      const [hasText, setHasText] = useState(false);
      const [messages, setMessages] = useState([
        { id: 1, type: 'image', imageUrl: 'https://i.ibb.co/fKxWKb3/Screenshot-20251129-120749.jpg', time: '17:06', sent: true, date: 'Tuesday' }
      ]);

      const inputRef = useRef(null);
      const messagesEndRef = useRef(null);

      const scrollToBottom = () => {
        setTimeout(() => {
          window.scrollTo(0, document.body.scrollHeight);
        }, 100);
      };

      useEffect(() => {
        scrollToBottom();
      }, [messages, showEmoji]);

      const sendMessage = () => {
        if (!inputRef.current?.textContent.trim()) return;
        const text = inputRef.current.textContent.trim();
        const newMsg = {
          id: messages.length + 1,
          text,
          time: new Date().toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' }),
          sent: true
        };
        setMessages(m => [...m, newMsg]);
        inputRef.current.innerHTML = '';
        setHasText(false);
        scrollToBottom();
      };

      return (
        <>
          {/* Conversation List */}
          <div style={{ 
            position: 'absolute', inset: 0, background: 'white', 
            transform: showChat ? 'translateX(-100%)' : 'translateX(0)',
            transition: 'transform 0.3s ease', zIndex: 1 
          }}>
            <div style={{ padding: '20px 16px', borderBottom: '1px solid #eee' }}>
              <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>
                <button style={{ background: 'none', border: 'none' }}>
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#666"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </button>
                <div style={{ flex: 1, background: '#f0f0f0', borderRadius: 20, padding: '10px 16px', display: 'flex', alignItems: 'center', gap: 10 }}>
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#999"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
                  <input placeholder="Search" style={{ border: 'none', background: 'none', outline: 'none', flex: 1 }} />
                </div>
              </div>
            </div>

            <div onClick={() => setShowChat(true)} style={{ padding: '16px', display: 'flex', gap: 12, cursor: 'pointer' }}>
              <div style={{ width: 56, height: 56, borderRadius: '50%', background: '#fb923c', color: 'white', fontSize: 22, fontWeight: 'bold', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>DS</div>
              <div style={{ flex: 1 }}>
                <div style={{ display: 'flex', justifyContent: 'space-between' }}>
                  <strong>Daddy Steve</strong>
                  <span style={{ color: '#999', fontSize: 14 }}>Oct 27</span>
                </div>
                <p style={{ color: '#666', fontSize: 14, marginTop: 4 }}>Daddy Steve joined Telegram</p>
              </div>
            </div>
          </div>

          {/* Chat View */}
          <div style={{ 
            position: 'absolute', inset: 0, 
            transform: showChat ? 'translateX(0)' : 'translateX(100%)',
            transition: 'transform 0.3s ease', 
            display: 'flex', flexDirection: 'column', background: '#f5f5f5'
          }}>
            {/* Header */}
            <div style={{ background: 'white', padding: '10px 8px', borderBottom: '1px solid #eee', display: 'flex', alignItems: 'center', gap: 10 }}>
              <button onClick={() => setShowChat(false)}>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#666"><polyline points="15 18 9 12 15 6"></polyline></svg>
              </button>
              <div style={{ width: 40, height: 40, borderRadius: '50%', background: '#fb923c', color: 'white', fontWeight: 'bold', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>DS</div>
              <div>
                <div style={{ fontWeight: '600' }}>Daddy Steve</div>
                <div style={{ fontSize: 13, color: '#666' }}>last seen 11/3/2025</div>
              </div>
            </div>

            {/* Messages */}
            <div className="messages-wrapper">
              <div style={{ padding: '16px', paddingBottom: '100px', display: 'flex', flexDirection: 'column', gap: 8 }}>
                {messages.map(msg => (
                  msg.type === 'image' ? (
                    <div key={msg.id} style={{ display: 'flex', justifyContent: 'flex-end' }}>
                      <div style={{ background: 'white', borderRadius: '16px 1px 1px 16px', padding: 4, maxWidth: '80%, boxShadow: '0 1px 2px rgba(0,0,0,0.1)', position: 'relative' }}>
                      <img src={msg.imageUrl} style={{ width: '100%', borderRadius: 12, display: 'block' }} />
                      <div style={{ position: 'absolute', bottom: 8, right: 10, color: 'white', fontSize: 11, textShadow: '0 1px 2px black', display: 'flex', alignItems: 'center', gap: 4 }}>
                        {msg.time}
                        <svg width="16" height="16"><path fill="none" stroke="white" strokeWidth="2" d="m6 16 6 6 10-10"/></svg>
                      </div>
                    </div>
                  </div>
                  ) : (
                    <div key={msg.id} style={{ alignSelf: 'flex-end', background: 'white', padding: '8px 12px', borderRadius: '16px 1px 1px 16px', maxWidth: '80%', boxShadow: '0 1px 2px rgba(0,0,0,0.1)' }}>
                      <div style={{ display: 'flex', alignItems: 'flex-end', gap: 6 }}>
                        <span>{msg.text}</span>
                        <span style={{ fontSize: 11, color: '#666', display: 'flex', alignItems: 'center', gap: 4 }}>
                          {msg.time}
                          <svg width="16" height="16"><path fill="none" stroke="#888" strokeWidth="2" d="m6 16 6 6 10-10"/></svg>
                        </span>
                      </div>
                    </div>
                  )
                ))}
                <div ref={messagesEndRef} />
              </div>
            </div>

            {/* Emoji Picker */}
            <div className={`emoji-picker ${showEmoji ? 'show' : ''}`}>
              <div style={{ padding: 16, textAlign: 'center', color: '#888' }}>
                Emoji Picker Here (300px height)
              </div>
            </div>

            {/* Hybrid Sticky Footer */}
            <div className={`footer ${showEmoji ? 'emoji-open' : ''}`}>
              <svg className="left-icon" viewBox="0 0 24 24" onClick={() => setShowEmoji(!showEmoji)}>
                <path fill="#666" d="M8 7.3a6.1 6.1 0 0 0-1 3.7v9c0 3.4 3 6 6.5 6c3.5 0 6.5-2.6 6.5-6V7a1 1 0 0 0-2 0v9c0 2.1-1.6 4-4.5 4s-4.5-1.9-4.5-4v-9a1 1 0 0 0-2 0Z..."/> {/* Attachment icon */}
              </svg>

              <div className="input-box-wrapper">
                <div
                  ref={inputRef}
                  className="input-box"
                  contentEditable
                  onInput={(e) => setHasText(e.currentTarget.textContent.trim().length > 0)}
                  onFocus={() => setShowEmoji(false)}
                  style={{ minHeight: 20 }}
                />
              </div>

              {hasText ? (
                <button className="send-button" onClick={sendMessage}>
                  <svg viewBox="0 0 24 24" width="20" height="20" fill="white">
                    <path d="M2 21L23 12 2 3v7l15 2-15 2v7z"/>
                  </svg>
                </button>
              ) : (
                <svg className="right-icon" viewBox="0 0 24 24">
                  <circle cx="12" cy="12" r="10" stroke="#666" fill="none"/>
                  <path d="M8 14s1.5 4 4 4 4-4 4-4" stroke="#666" fill="none"/>
                </svg>
              )}
            </div>
          </div>
        </>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<TelegramChat />);
  </script>
</body>
</html>
